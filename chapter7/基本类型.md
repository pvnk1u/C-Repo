# 基本类型

到目前为止，只使用了C语言的两种基本（内置的）类型：int和float。（还见过_Bool，那是C99中的一种基本类型。）本章讲述其余的基本类型，并从整体上讨论有关的重要问题。首先展示整数类型的取值范围，包括长整型、短整型和无符号整型。然后介绍double类型和long double类型，这些类型提供了更大的取值范围和比float类型更高的精度。然后将讨论char（字符）类型，这种类型将用于字符数据的处理。还将讨论解决重要的类型转换问题，即把一种类型的值转换成另外一种类型的等价值。随后展示利用typeof定义新类型名的方法。最后，描述sizeof运算符，这种运算符用来计算一种类型需要的存储空间大小。



## 整数类型

C语言支持两种根本不同的数值类型：整数类型（也称整型）和浮点类型（也称浮点型）。整型类型的值是整数，而浮点类型的值则可能还有小数部分。整数类型又分为两大类：有符号型和无符号型。



### 有符号整数和无符号整数

有符号整数如果为正数或零，那么最左边的位（符号位）为0；如果为负数，则符号位为1。因此，最大的16位整数的二进制表示形式是0111111111111111，对应的值是32767（即2^15 -1）。而最大的32位整数是01111111111111111111111111111111，对应的数值是2147483647（即2^31-1）。不带符号位的整数（最左边的位是数值的一部分）的整数称为无符号整数。最大的16位无符号整数是65535（即2^16-1），而最大的32位无符号整数是4294967295（即2^32-1）。



**默认情况下，C语言中的整型变量都是有符号的，也就是说最左位保留为符号位。若要告诉编译器变量没有符号位，需要把它声明成unsigned类型。无符号整数主要用于系统编程和底层与机器相关的应用。后面的章节将讨论无符号整数的常见应用，在此之前，通常回避无符号整数。**



C语言的整数类型有不同的尺寸。int类型通常为32位，但在老的CPU上可能是16位。有些程序所需的数很大，无法以int类型存储，所以C语言还提供了长整型。某些时候，为了节省空间，通常会指示编译器以比正常存储小的空间来存储一些数，这样的数称为短整型。



**为了使构造的整数类型正好满足需要，可以指明变量是long类型或short类型，signed类型或unsigned类型，甚至可以把说明符组合起来（如long unsigned in）。**然而，实际上只有下列6种组合可以产生不同的类型：

```c
short int
unsigned short int

int
unsigned int

long int
unsigned long int
```

 其他组合都是上述某种类型的同义词。（例如，除非额外说明，否则所有整数都是有符号的。因此long signed int和long int是一样的类型。）另外，说明符的顺序没什么影响，所以unsigned short int和short unsigned int是一样的。



C语言允许通过省略单词int来缩写整数类型的名字。例如，unsigned short int可以缩写为unsigned short，而long int则可以缩写为long。C程序员经常会省略int；Java等语言甚至不允许程序员使用short int或long int这样的名字，而必须写成short或long。



6种整数类型的每一种所表示的取值范围都会根据机器的不同而不同，但是有两条所有编译器都必须遵守的原则。首先，C标准要求short int、int和long int中的每一种类型都要覆盖一个确定的最小取值范围。其次，标准要求int类型不能比short int类型短，long int类型不能比int类型短。但是，short int类型的取值范围有可能和int类型的范围是一样的，int类型的取值范围也可以和long int的一样。



下图说明了在16位机上整数类型通常的取值范围，注意short int和int有相同的取值范围：

| 类型               | 最小值      | 最大值     |
| ------------------ | ----------- | ---------- |
| short int          | -32768      | 32767      |
| unsigned short int | 0           | 65535      |
| int                | -32768      | 32767      |
| unsigned int       | 0           | 65535      |
| long int           | -2147483648 | 2147483647 |
| unsigned long int  | 0           | 4294967295 |



下表说明了32位机上整数类型通常的取值范围，这里的int和long int有着相同的取值范围：

| 类型               | 最小值      | 最大值     |
| ------------------ | ----------- | ---------- |
| short int          | -32768      | 32767      |
| unsigned short int | 0           | 65535      |
| int                | -2147483648 | 2147483647 |
| unsigned int       | 0           | 4294967295 |
| long int           | -2147483648 | 2147483647 |
| unsigned long int  | 0           | 4294967295 |



下表给出了64位机上（尤其是UNIX系统下）整数类型常见的取值范围：

| 类型               | 最小值               | 最大值               |
| ------------------ | -------------------- | -------------------- |
| short int          | -32768               | 32767                |
| unsigned short int | 0                    | 65535                |
| int                | -2147483648          | 2147483647           |
| unsigned int       | 0                    | 4294967295           |
| long int           | -9223372036854775808 | 9223372036854775807  |
| unsigned int       | 0                    | 18446744073709551615 |



再强调一下，上面三个表中给出的取值范围不是C标准强制的，会随着编译器的不同而不同。对于特定的实现，确定整数类型范围的一种方法是检查<limits.h>头。该头是标准库的一部分，其中定义了表示每种整数类型的最大值和最小值的宏。



### C99中的整数类型

C99提供了两个额外的标准整数类型：long long int和unsigned long long int。增加这两种整数类型有两个原因，一是为了满足日益增长的对超大型整数的需求，二是为了适应支持64位运算的新处理器的能力。这两个long long类型要求至少64位宽，所以long long int类型值的范围通常为-2^63(-9223372036854775808)到2^63-1(9223372036854775807)，而unsigned long long int类型值的范围通常为0到2^64-1（18446744073709551615）。



C99中把short int、int、long int和long long int类型（以及signed char类型）称为标准有符号整型，而把unsigned short int、unsigned int、unsigned long int和unsigned long long int类型（以及unsigned char类型）和_Bool类型称为标准无符号整型。



除了标准的整数类型以外，C99标准还允许在具体实现时定义扩展的数类整型（包括有符号的和无符号的）。例如，编译器可以提供有符号和无符号的128位整数类型。



### 整数常量

现在把注意力转向常量——在程序中以文本形式出现的数，而不是读、写或计算出来的数。C语言允许用十进制（基数为10）、八进制（基数为8）和十六进制（基数为16）形式书写整数常量。



**八进制数和十六进制数**

八进制是用数字0~7书写的。八进制数的每一位表示一个8的幂（这就如同十进制数的每一位表示10的幂一样）。因此，八进制的数237表示成十进制数就是`2*8^2+3*8^1+7*8^0=128+24+7=159`。



十六进制是用数字0~9加上字母A~F书写的。其中字母A~F表示10~15的数。十六进制数的每一位表示一个16的幂，十六进制数1AF的十进制数值是`1*16v^2+10*16^1+15*16^0=256+160+15=431`。



- 十进制常量包含0~9中的数字，但是一定不能以零开头：

  15	255	32767

- 八进制常量只包含0~7中的数字，而且必须要以零开头：

  017	0377 	077777

- 十六进制常量包含0~9中的数字和a~f中的字母，而且总是以0x开头：

  0xf	0xff	0x7fff



十六进制常量中的字母既可以是大写字母也可以是小写字母。



**需要切记的是八进制和十六进制只是书写数的方式，它们不会对数的实际存储方式产生影响。（整数都是以二进制形式存储的，跟表示方式无关。）任何时候都可以从一种书写形式切换到另一种书写形式，甚至可以混合使用：10+015 + 0x20的值为55（十进制）。八进制和十六进制更适合底层程序的编写。**直到第20章才会较多地用到它们。



**十进制整数常量的类型通常为int，但如果常量的值大得无法存储在int型中，就用long int类型。如果出现long int不够用得罕见情况，编译器会用unsigned long int作最后的尝试。确定八进制和十六进制常量得规则略有不同：编译器会依次尝试int、unsigned int、long int和unsigned long int类型，直至找到能表示该常量的类型。**



为了强制编译器把常量作为长整数来处理，只需在后边加上一个字母L（或l）：

```
15L 0377L 0x7fffl
```

为了指明是无符号常量，可以在常量后边加上字母U（或u）：

```
15U 0377U 0x7fffu
```

L和U可以结合使用，以表明常量既是长整型又是无符号的：0xffffffffUL。（字母L、U的顺序和大小写无所谓。）



### C99中的整数常量

