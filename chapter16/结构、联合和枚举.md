# 结构、联合和枚举

本章介绍三种新的类型：结构、联合和枚举。结构是可能具有不同类型的值（成员）的集合。联合和结构很相似，不同之处在于联合的成员共享同一存储空间。这样的结果是，联合可以每次存储一个成员，但是无法同时存储全部成员。枚举是一种整数类型，它的值由程序员来命名。



结构是到目前为止最重要的一种类型，所以本章的大部分内容都是关于结构的。

## 结构变量

到目前为止介绍的唯一一种数据结构就是数组。数组有两个重要特性。首先，数组的所有元素具有相同的类型；其次，为了选择数组元素需要指明元素的位置（作为整数下标）。



结构所具有的特性与数组很不相同。结构的元素（在C语言中的说法是结构的成员）可能具有不同的类型。而且，每个结构成员都有名字，所以为了选择特定的结构成员需要指明结构成员的名字而不是它的位置。



### 结构变量的声明

当需要存储相关数据项的集合时，结构是一种合乎逻辑的选择。例如，假设需要记录存储在仓库中的零件。用来存储每种零件的信息可能包含零件的编号（整数）、零件的名称（字符串）以及现有零件的数量（整数）。为了产生一个可以存储全部3种数据项的变量，可以使用类似下面这样的声明：

```c
struct {
	int number;
	char name[NAME_LEN+1];
	int on_hand;
} part1,part2;
```

每个结构变量都有3个成员：number(零件的编号)、name(零件的名称)和on_hand（现有数量）。注意，这里的声明格式和C语言中其他变量的声明格式一样。struct{...}指明了类型，而part1和part2则是具有这种类型的变量。



**结构的成员在内存中是按照声明的顺序存储的。**为了说明part1在内存中存储的形式，现在假设：

1. part1存储在地址为2000的内存单元中
2. 每个整数在内存中占4个字节
3. NAME_LEN的值为25
4. 成员之间没有间隙。



根据这些假设，part1在内存中的样子应该是：

1. 地址2000~2003为结构成员number
2. 地址2004~2029为结构成员name
3. 地址2030~2033为结构成员on_hand



每个结构代表一种新的作用域。任何声明在此作用域内的名字都不会和程序中的其他名字冲突。（用C语言的术语可描述为，每个结构都为它的成员设置了独立的名字空间。）例如，下列声明可以出现在同一程序中：

```c
struct{
	int number;
	char name[NAME_LEN+1];
	int on_hand;
}part1,part2;

struct{
    char name[NAME_LEN+1];
  	int number;
    char sex;
}employee1,employee2;
```

结构part1和part2中的成员number和成员name不会与结构employee1和employee2中的成员number和成员name冲突。



