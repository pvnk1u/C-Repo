# 程序设计

虽然C语言不是专门用来编写大型程序的，但许多大型程序的确是用C语言编写的。这会很复杂，需要很多的耐心和细心，但确实可以做到。本章将讨论那些有助于编写大型程序的技术，并且会展示哪些C语言的特性（例如static存储类）特别有用。



## 模块

设计C程序（或其他任何语言的程序）时，最好将它看作是一些独立的模块。模块是一组服务的集合，其中一些服务可以被程序的其他部分使用。每个模块都有一个接口来描述所提供的服务。模块的细节（包括这些服务自身的源代码）都包含在模块的实现中。



在C语言环境下，这些“服务”就是函数。模块的接口就是头文件，头文件中包含那些可以被程序中其他文件调用的函数的原型。模块的实现就是包含该模块中函数的定义的源文件。



C库本身就是一些模块的集合。库中每个头都是一个模块的接口。例如，`<stdio.h>`是包含输入/输出函数的模块的接口，而`<string.h>`则是包含字符串处理函数的模块的接口。



将程序分割成模块有一系列好处。

- 抽象

  如果模块设计合理，我们可以把它们作为抽象对待。我们知道模块会做什么，但不需要知道这些功能的实现细节。因为抽象的存在，我们不必为了修改部分程序而了解整个程序是如何工作的。同时，抽象让一个团队的多个开发者共同开发一个程序更容易。一旦对模块的接口达成一致，实现每一个模块的责任可以被分派到各个成员身上。团队成员可以更大程度上相互独立地工作。

- 可复用性

  任何一个提供服务的模块都有可能在其他程序中复用。由于通常很难预测模块的未来使用，因此最好将模块设计成可复用的。

- 可维护性

  将程序模块化后，程序中的错误通常只会影响一个模块实现，因而更容易找到并修正错误。在修正了错误之后，重建程序只需重新编译该模块实现（然后重新链接整个程序）即可。更广泛地说，为了提高性能或将程序移植到另一个平台上，我们甚至可以替换整个模块的实现。



